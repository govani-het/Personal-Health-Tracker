<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/nutrition_page.css' %}">
    <script src="{% static 'js/nutrition_page.js' %}"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthHub: Nutrition Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar (with 'Nutrition' active) -->
        {% include 'sidebar.html' %}

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header">
                <div class="date-navigator">
                    <button class="nav-arrow"><</button>
                    <input type="date" id="current-date">
                    <button class="nav-arrow">></button>
                </div>
                <div class="header-actions">
                    <button class="action-btn" id="add-meal-btn"><span>+</span> Add Meal Entry</button>
                    <button class="icon-btn" title="Export Logs"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12v-4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4m-6 6l-3-3m0 0l3-3m-3 3h12"/></svg></button>
                </div>
            </header>

            <section class="daily-summary">
                <div class="summary-card calories"><div class="progress-ring" style="--p:80;--c:#ff9f43;"></div><div class="summary-text"><h4>1600/2000</h4><p>Calories (kcal)</p></div></div>
                <div class="summary-card protein"><div class="progress-ring" style="--p:70;--c:#3b82f6;"></div><div class="summary-text"><h4>105/150g</h4><p>Protein</p></div></div>
                <div class="summary-card carbs"><div class="progress-ring" style="--p:65;--c:#10b981;"></div><div class="summary-text"><h4>162/250g</h4><p>Carbs</p></div></div>
                <div class="summary-card fats"><div class="progress-ring" style="--p:90;--c:#8b5cf6;"></div><div class="summary-text"><h4>63/70g</h4><p>Fats</p></div></div>
            </section>

            <section class="meal-log">
                <div class="card meal-group"><h4>Breakfast</h4><div class="meal-item"><div><h5>Oatmeal with Berries</h5><p>1 cup | 350 kcal</p></div><div class="meal-macros"><span title="Protein">P: 10g</span><span title="Carbs">C: 60g</span><span title="Fats">F: 8g</span></div><div class="item-actions"><button class="icon-btn" title="Edit"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M5 19h1.4l8.6-8.6l-1.4-1.4L5 17.6V19zm16-7.4l-1.4-1.4l-2.6 2.6l1.4 1.4l2.6-2.6zM19.8 4.2c-.4-.4-1-.4-1.4 0l-2 2l1.4 1.4l2-2c.4-.4.4-1 0-1.4z"/></svg></button><button class="icon-btn" title="Delete"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg></button></div></div></div>
                <div class="card meal-group"><h4>Lunch</h4><div class="meal-item"><div><h5>Paneer Sabzi & Roti</h5><p>150g & 2 pieces | 550 kcal</p></div><div class="meal-macros"><span title="Protein">P: 25g</span><span title="Carbs">C: 45g</span><span title="Fats">F: 28g</span></div><div class="item-actions"><button class="icon-btn" title="Edit"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M5 19h1.4l8.6-8.6l-1.4-1.4L5 17.6V19zm16-7.4l-1.4-1.4l-2.6 2.6l1.4 1.4l2.6-2.6zM19.8 4.2c-.4-.4-1-.4-1.4 0l-2 2l1.4 1.4l2-2c.4-.4.4-1 0-1.4z"/></svg></button><button class="icon-btn" title="Delete"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg></button></div></div></div>
            </section>
        </main>
    </div>

    <!-- Add Meal Modal -->
    <div id="add-meal-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-btn" id="close-modal-btn">Ã—</button>
            <h2>Add Meal Entry</h2>
            <form action="{% url 'add_meal' %}" method="post">
                {% csrf_token %}
                <div class="form-row"><div class="input-group"><label>Meal Type</label><div class="select-wrapper"><select><option>Breakfast</option><option>Lunch</option><option>Dinner</option><option>Snack</option></select></div></div><div class="input-group"><label>Date of Meal</label><input type="date"></div></div>
                <div class="input-group"><label>Food Name</label><input type="text" placeholder="e.g., Brown Rice, Paneer Sabzi"></div>
                <div class="form-row"><div class="input-group"><label>Quantity</label><input type="text" placeholder="e.g., 1 cup, 100g"></div><div class="input-group"><label>Calories (kcal)</label><input type="number" placeholder="450"></div></div>
                <div class="input-group"><label>Macronutrients</label><div class="macro-inputs"><input type="number" placeholder="Protein (g)"><input type="number" placeholder="Carbs (g)"><input type="number" placeholder="Fats (g)"></div></div>
                <div class="input-group"><label>Notes</label><textarea placeholder="Felt heavy after this meal..."></textarea></div>
                <button type="submit" class="action-btn">Save Meal</button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>